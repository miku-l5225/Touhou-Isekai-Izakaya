@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* 
  å¼ºåˆ¶ Dark Mode ä½¿ç”¨ class ç­–ç•¥ï¼Œè€Œéç³»ç»Ÿåå¥½ (media strategy)ã€‚
  è¿™æ ·åªè¦ html æ ‡ç­¾ä¸æ·»åŠ  'dark' ç±»ï¼Œæ‰€æœ‰ dark: ä¿®é¥°ç¬¦å°±ä¸ä¼šç”Ÿæ•ˆã€‚
  ä»è€Œå®ç°å¼ºåˆ¶æµ…è‰²æ¨¡å¼ã€‚
*/
@variant dark (&:where(.dark, .dark *));

@theme {
  /* ä¸œæ–¹é…è‰²æ–¹æ¡ˆ */
  --color-touhou-red: #D32F2F; /* çµæ¢¦çº¢ - æ²‰ç¨³ç‰ˆ */
  --color-touhou-red-light: #FFCDD2;
  --color-touhou-red-dark: #B71C1C;
  
  --color-marisa-gold: #FBC02D; /* é­”ç†æ²™é‡‘ */
  --color-marisa-gold-light: #FFF9C4;
  
  --color-izakaya-bg: #FDFBF7; /* å±…é…’å±‹ç±³è‰²èƒŒæ™¯ */
  --color-izakaya-paper: #FFFDF5; /* çº¸å¼ è‰² */
  --color-izakaya-wood: #5D4037; /* æ·±æœ¨çº¹ */
  --color-izakaya-wood-light: #8D6E63;
  
  --color-ink: #212121; /* å¢¨è‰² */
  --color-ink-light: #757575;
  
  --font-display: "Ma Shan Zheng", "Noto Serif SC", serif;
  --font-serif-display: "Noto Serif SC", "Songti SC", "SimSun", serif;
  --font-sans-body: "Noto Sans SC", system-ui, sans-serif;
  
  --shadow-paper: 0 2px 8px rgba(93, 64, 55, 0.1);
  --shadow-floating: 0 8px 24px rgba(93, 64, 55, 0.15);

  /* åŠ¨ç”» */
  --animate-fade-in: fade-in 0.3s ease-out;
  --animate-pop: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  
  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  @keyframes pop {
    0% { transform: scale(0.9) translateY(5px); opacity: 0; }
    100% { transform: scale(1) translateY(0); opacity: 1; }
  }
}

/* Theme Overrides */

/* Dark Theme (æ·±è‰²ä¸»é¢˜) */
html.theme-dark {
  --color-izakaya-bg: #121212;
  --color-izakaya-paper: #1E1E1E;
  --color-izakaya-wood: #8D6E63; /* Lighter wood for contrast on dark */
  --color-izakaya-wood-light: #A1887F;
  
  --color-ink: #E0E0E0; /* Light text */
  --color-ink-light: #9E9E9E;
  
  --shadow-paper: 0 2px 8px rgba(0, 0, 0, 0.5);
  --shadow-floating: 0 8px 24px rgba(0, 0, 0, 0.7);

  /* Adjust pattern opacity for dark mode */
  --bg-pattern-asanoha: 
    repeating-linear-gradient(60deg, rgba(255, 255, 255, 0.03) 0 1px, transparent 1px 18px),
    repeating-linear-gradient(-60deg, rgba(255, 255, 255, 0.03) 0 1px, transparent 1px 18px);
}

/* Eye Protection Theme (æŠ¤çœ¼ä¸»é¢˜) - Warmer, lower contrast */
html.theme-eye-protection {
  --color-izakaya-bg: #E3DCC3; /* Greenish-beige (C3) or warmer */
  --color-izakaya-paper: #F0EAD6; /* Eggshell */
  
  /* Softer ink */
  --color-ink: #3E3B35;
  --color-ink-light: #6D6860;
  
  /* Softer Red */
  --color-touhou-red: #A64444;
  --color-touhou-red-dark: #8A3333;
  
  --bg-pattern-asanoha: 
    repeating-linear-gradient(60deg, rgba(93, 64, 55, 0.03) 0 1px, transparent 1px 18px),
    repeating-linear-gradient(-60deg, rgba(93, 64, 55, 0.03) 0 1px, transparent 1px 18px);
}

/* Typing Effect Cursor */
.typing-effect > *:last-child::after {
  content: 'ğŸ–Šï¸';
  display: inline-block;
  animation: writing 1s infinite alternate;
  font-size: 0.8em;
  margin-left: 4px;
  vertical-align: middle;
}

@keyframes writing {
  0% { transform: rotate(0deg) translateX(0); opacity: 0.7; }
  100% { transform: rotate(-10deg) translateX(-2px); opacity: 1; }
}

/* 
  å…¨å±€æ ·å¼é‡ç½®ä¸åŸºç¡€è®¾å®š 
  Global Reset & Base Settings
*/

:root {
  /* éº»å¶çº¹ (Asanoha) èƒŒæ™¯å›¾æ¡ˆ - ä½¿ç”¨ CSS æ¸å˜æ¨¡æ‹Ÿ */
  --bg-pattern-asanoha: 
    repeating-linear-gradient(60deg, rgba(141, 110, 99, 0.05) 0 1px, transparent 1px 18px),
    repeating-linear-gradient(-60deg, rgba(141, 110, 99, 0.05) 0 1px, transparent 1px 18px);
}

html, body, #app {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  overflow: hidden; /* Ensure no scrollbars on root elements */
}

body {
  @apply text-ink bg-izakaya-bg font-sans-body;
  background-image: var(--bg-pattern-asanoha);
  background-attachment: fixed;
  transition: background-color 0.3s, color 0.3s; /* Smooth theme transition */
}

/* 
  è‡ªå®šä¹‰æ»šåŠ¨æ¡ - ä»¿æœ¨è´¨/çº¸è´¨æ‰‹æ„Ÿ
  Custom Scrollbar 
*/
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-izakaya-wood-light/50 rounded-full;
  border: 2px solid transparent;
  background-clip: content-box;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-izakaya-wood/70;
}

/* 
  å®ç”¨å·¥å…·ç±» 
  Utility Classes 
*/

.font-display {
  font-family: var(--font-serif-display);
}

/* ç»ç’ƒæ‹Ÿæ€ - å’Œçº¸é£æ ¼ */
.glass-paper {
  @apply bg-izakaya-paper/90 backdrop-blur-sm border border-izakaya-wood/10 shadow-paper;
  transition: background-color 0.3s, border-color 0.3s;
}

/* æŒ‰é’®é£æ ¼ - ä¸œæ–¹é£ */
.btn-touhou {
  @apply px-4 py-2 rounded transition-all duration-200 font-medium flex items-center justify-center gap-2;
  @apply bg-touhou-red text-white shadow-sm;
  @apply hover:bg-touhou-red-dark hover:shadow-md hover:-translate-y-0.5;
  @apply active:translate-y-0;
}

.btn-touhou-secondary {
  @apply px-4 py-2 rounded transition-all duration-200 font-medium flex items-center justify-center gap-2;
  @apply bg-white border border-izakaya-wood/20 text-izakaya-wood hover:bg-izakaya-bg hover:border-izakaya-wood/40;
}

/* Dark mode overrides for secondary button manually since we rely on CSS vars mostly but some might be hardcoded */
html.theme-dark .btn-touhou-secondary {
  @apply bg-izakaya-paper border-izakaya-wood/30 text-ink hover:bg-izakaya-wood/20;
}
html.theme-eye-protection .btn-touhou-secondary {
  @apply bg-izakaya-paper/50;
}

.btn-touhou-ghost {
  @apply p-2 rounded transition-colors text-ink-light hover:text-touhou-red hover:bg-touhou-red/5;
}

/* å¡ç‰‡é£æ ¼ */
.card-touhou {
  @apply bg-izakaya-paper/90 backdrop-blur-sm border border-izakaya-wood/10 shadow-paper rounded-lg p-4;
  transition: background-color 0.3s, border-color 0.3s;
}

/* è¾“å…¥æ¡†é£æ ¼ */
.input-touhou {
  @apply w-full bg-white/80 border border-izakaya-wood/20 rounded px-3 py-2 text-ink outline-none transition-colors;
  @apply focus:border-touhou-red/50 focus:ring-2 focus:ring-touhou-red/10;
}
html.theme-dark .input-touhou {
  @apply bg-black/20 border-izakaya-wood/40 text-ink;
}

/* å…¨å±€è¾“å…¥æ¡†æ·±è‰²æ¨¡å¼ä¿®æ­£ - å·²ç¦ç”¨ */
input, textarea, select {
  @apply text-ink; /* é»˜è®¤äº®è‰²æ¨¡å¼ä¸‹çš„æ–‡å­—é¢œè‰² */
}

input::placeholder, textarea::placeholder {
  @apply text-stone-400; /* å¢åŠ å¯¹æ¯”åº¦ï¼ŒåŸä¸º text-ink-light/50 å¤ªæ·¡ */
}

/* Burning Effect */
@keyframes burn-text {
  0% { text-shadow: 0 0 2px #FFD700, 0 -2px 4px #FF8C00; color: #FFF; }
  50% { text-shadow: 0 0 4px #FFD700, 0 -4px 8px #FF4500; color: #FFF; }
  100% { text-shadow: 0 0 2px #FFD700, 0 -2px 4px #FF8C00; color: #FFF; }
}

@keyframes burn-flame {
  0% { transform: scale(1) rotate(-2deg); opacity: 0.8; }
  50% { transform: scale(1.1) rotate(2deg); opacity: 1; }
  100% { transform: scale(1) rotate(-2deg); opacity: 0.8; }
}

.text-burning {
  animation: burn-text 2s ease-in-out infinite;
  font-weight: bold;
}

.flame-particle {
  position: absolute;
  width: 6px;
  height: 6px;
  background: #FF4500;
  border-radius: 50%;
  filter: blur(2px);
  animation: burn-flame 1s infinite alternate;
  pointer-events: none;
}
